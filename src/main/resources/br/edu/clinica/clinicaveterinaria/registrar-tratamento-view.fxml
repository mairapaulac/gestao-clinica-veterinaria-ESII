<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Spinner?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>

<VBox xmlns="http://javafx.com/javafx/17.0.6" xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="br.edu.clinica.clinicaveterinaria.controller.RegistrarTratamentoController"
      stylesheets="@css/registrar-tratamento.css"
      style="-fx-background-color: #f5f7fa; -fx-padding: 15;"
      spacing="12">

    <Label text="Registrar Tratamento" styleClass="title"/>

    <VBox styleClass="content-container" spacing="15">
        <!-- Informações da Consulta -->
        <VBox spacing="8">
            <Label text="Informações da Consulta" styleClass="section-title"/>
            <GridPane hgap="10" vgap="6">
                <Label text="Paciente:" GridPane.rowIndex="0" GridPane.columnIndex="0" styleClass="info-label" minWidth="80"/>
                <Label fx:id="lblPaciente" text="" GridPane.rowIndex="0" GridPane.columnIndex="1" styleClass="info-value"/>
                <Label text="Data/Hora:" GridPane.rowIndex="0" GridPane.columnIndex="2" styleClass="info-label" minWidth="80"/>
                <Label fx:id="lblDataHora" text="" GridPane.rowIndex="0" GridPane.columnIndex="3" styleClass="info-value"/>
                <Label text="Veterinário:" GridPane.rowIndex="1" GridPane.columnIndex="0" styleClass="info-label" minWidth="80"/>
                <Label fx:id="lblVeterinario" text="" GridPane.rowIndex="1" GridPane.columnIndex="1" GridPane.columnSpan="3" styleClass="info-value"/>
            </GridPane>
        </VBox>

        <!-- Histórico Resumido do Paciente -->
        <VBox spacing="8">
            <Label text="Histórico Resumido do Paciente" styleClass="section-title"/>
            <TableView fx:id="tabelaHistorico" prefHeight="100" maxHeight="120">
                <columns>
                    <TableColumn fx:id="colDataHistorico" text="Data" prefWidth="120"/>
                    <TableColumn fx:id="colDiagnosticoHistorico" text="Diagnóstico" prefWidth="250"/>
                    <TableColumn fx:id="colTratamentoHistorico" text="Tratamento" prefWidth="300"/>
                </columns>
                <columnResizePolicy>
                    <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                </columnResizePolicy>
            </TableView>
        </VBox>

        <!-- Diagnóstico e Procedimentos -->
        <VBox spacing="8">
            <Label text="Diagnóstico e Procedimentos" styleClass="section-title"/>
            <GridPane hgap="10" vgap="10">
                <Label text="Diagnóstico *" GridPane.rowIndex="0" GridPane.columnIndex="0" styleClass="info-label"/>
                <TextArea fx:id="txtDiagnostico" promptText="Descreva o diagnóstico..." 
                          prefRowCount="2" wrapText="true" 
                          GridPane.rowIndex="0" GridPane.columnIndex="1" GridPane.columnSpan="3"
                          styleClass="text-area"/>

                <Label text="Procedimentos *" GridPane.rowIndex="1" GridPane.columnIndex="0" styleClass="info-label"/>
                <TextArea fx:id="txtProcedimentos" promptText="Descreva os procedimentos realizados..." 
                          prefRowCount="2" wrapText="true" 
                          GridPane.rowIndex="1" GridPane.columnIndex="1" GridPane.columnSpan="3"
                          styleClass="text-area"/>
            </GridPane>
        </VBox>

        <!-- Medicamentos Prescritos -->
        <VBox spacing="8">
            <Label text="Medicamentos Prescritos" styleClass="section-title"/>
            <GridPane hgap="10" vgap="8">
                <Label text="Medicamento" GridPane.rowIndex="0" GridPane.columnIndex="0" styleClass="info-label"/>
                <ComboBox fx:id="comboMedicamento" promptText="Selecione..." 
                          GridPane.rowIndex="0" GridPane.columnIndex="1" prefWidth="250"
                          styleClass="combo-box"/>

                <Label text="Quantidade" GridPane.rowIndex="0" GridPane.columnIndex="2" styleClass="info-label"/>
                <Spinner fx:id="spinnerQuantidade" editable="true" 
                         GridPane.rowIndex="0" GridPane.columnIndex="3" prefWidth="100"
                         styleClass="spinner"/>

                <Label fx:id="lblEstoqueDisponivel" text="" 
                       GridPane.rowIndex="1" GridPane.columnIndex="1"
                       styleClass="stock-label"/>

                <Button fx:id="btnAdicionarMedicamento" text="+ Adicionar" 
                        GridPane.rowIndex="1" GridPane.columnIndex="3"
                        styleClass="btn-add"/>
            </GridPane>

            <TableView fx:id="tabelaMedicamentos" prefHeight="100" maxHeight="120">
                <columns>
                    <TableColumn fx:id="colMedicamento" text="Medicamento" prefWidth="280"/>
                    <TableColumn fx:id="colQuantidade" text="Quantidade" prefWidth="120"/>
                    <TableColumn fx:id="colAcoes" text="Ações" prefWidth="100"/>
                </columns>
                <columnResizePolicy>
                    <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                </columnResizePolicy>
            </TableView>
        </VBox>

        <!-- Botões de Ação -->
        <HBox alignment="CENTER_RIGHT" spacing="8" style="-fx-padding: 5 0 0 0;">
            <Button fx:id="btnCancelar" text="Cancelar" styleClass="btn-secondary"/>
            <Button fx:id="btnSalvar" text="Salvar" styleClass="btn-primary" defaultButton="true"/>
        </HBox>
    </VBox>
</VBox>
