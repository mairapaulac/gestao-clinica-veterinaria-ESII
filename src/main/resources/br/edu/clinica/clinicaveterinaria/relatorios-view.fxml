<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.DatePicker?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>

<VBox xmlns="http://javafx.com/javafx/17.0.6" xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="br.edu.clinica.clinicaveterinaria.controller.RelatoriosController"
      stylesheets="@css/relatorios.css"
      style="-fx-background-color: #f5f7fa; -fx-padding: 20;"
      spacing="15">


    <VBox styleClass="content-container" spacing="15">
        <!-- Seleção de Tipo de Relatório -->
        <VBox spacing="10">
            <Label text="Tipo de Relatório" styleClass="section-title"/>
            <ComboBox fx:id="comboTipoRelatorio" promptText="Selecione o tipo de relatório" styleClass="combo-box" prefWidth="300"/>
        </VBox>

        <!-- Filtros -->
        <VBox fx:id="vboxFiltros" spacing="10" visible="false" managed="false">
            <Label text="Filtros" styleClass="section-title"/>
            <VBox styleClass="info-box" spacing="15">
                <GridPane hgap="15" vgap="10">
                    <Label text="Data Inicial:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                    <DatePicker fx:id="dpDataInicial" styleClass="date-picker" GridPane.rowIndex="0" GridPane.columnIndex="1"/>

                    <Label text="Data Final:" GridPane.rowIndex="0" GridPane.columnIndex="2"/>
                    <DatePicker fx:id="dpDataFinal" styleClass="date-picker" GridPane.rowIndex="0" GridPane.columnIndex="3"/>

                    <Label fx:id="lblFiltro1" text="Veterinário:" GridPane.rowIndex="1" GridPane.columnIndex="0" visible="false" managed="false"/>
                    <ComboBox fx:id="comboVeterinario" styleClass="combo-box" prefWidth="200" GridPane.rowIndex="1" GridPane.columnIndex="1" visible="false" managed="false"/>

                    <Label fx:id="lblFiltro2" text="Paciente:" GridPane.rowIndex="1" GridPane.columnIndex="2" visible="false" managed="false"/>
                    <ComboBox fx:id="comboPaciente" styleClass="combo-box" prefWidth="200" GridPane.rowIndex="1" GridPane.columnIndex="3" visible="false" managed="false"/>

                    <Label fx:id="lblFiltro3" text="Status:" GridPane.rowIndex="2" GridPane.columnIndex="0" visible="false" managed="false"/>
                    <ComboBox fx:id="comboStatus" styleClass="combo-box" prefWidth="200" GridPane.rowIndex="2" GridPane.columnIndex="1" visible="false" managed="false"/>
                </GridPane>
            </VBox>
        </VBox>

        <!-- Botões de Ação -->
        <HBox spacing="10" alignment="CENTER_LEFT">
            <Button fx:id="btnGerar" text="Gerar Relatório" styleClass="btn-primary"/>
            <Button fx:id="btnLimpar" text="Limpar Filtros" styleClass="btn-secondary"/>
        </HBox>

        <!-- Resultados do Relatório -->
        <VBox fx:id="vboxResultados" spacing="10" visible="false" managed="false">
            <HBox spacing="10" alignment="CENTER_LEFT">
                <Label text="Resultados" styleClass="section-title"/>
                <HBox HBox.hgrow="ALWAYS"/>
                <Button fx:id="btnExportarPDF" text="Exportar PDF" styleClass="btn-export"/>
                <Button fx:id="btnExportarExcel" text="Exportar Excel" styleClass="btn-success"/>
            </HBox>

            <TableView fx:id="tabelaRelatorio" VBox.vgrow="ALWAYS" prefHeight="400" styleClass="table-view">
                <columnResizePolicy>
                    <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                </columnResizePolicy>
            </TableView>

            <!-- Estado Vazio -->
            <VBox fx:id="vboxEmptyState" alignment="CENTER" spacing="10" styleClass="empty-state" visible="false" managed="false">
                <Label text="Nenhum dado encontrado para os critérios informados." styleClass="empty-state-label"/>
            </VBox>
        </VBox>
    </VBox>
</VBox>
