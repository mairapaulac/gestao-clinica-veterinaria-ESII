<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.ToggleButton?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>

<VBox xmlns="http://javafx.com/javafx/17.0.6" xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="br.edu.clinica.clinicaveterinaria.controller.FaturamentoController"
      stylesheets="@css/faturamento.css"
      style="-fx-background-color: #f5f7fa; -fx-padding: 20;"
      spacing="15">

    <VBox styleClass="content-container" spacing="15">
        <!-- Toggle entre Pendentes e Pagos -->
        <HBox spacing="10" alignment="CENTER_LEFT">
            <ToggleButton fx:id="togglePendentes" text="Consultas Pendentes" selected="true" styleClass="toggle-button"/>
            <ToggleButton fx:id="togglePagos" text="Pagamentos Realizados" styleClass="toggle-button"/>
            <HBox HBox.hgrow="ALWAYS"/>
            <Label text="Total do Mês:" styleClass="info-label" visible="false" managed="false" fx:id="lblTotalMesLabel"/>
            <Label fx:id="lblTotalMes" text="R$ 0,00" styleClass="total-value" style="-fx-font-size: 16px;" visible="false" managed="false"/>
        </HBox>

        <!-- Busca -->
        <HBox spacing="10" alignment="CENTER_LEFT">
            <TextField fx:id="txtBuscar" promptText="Buscar por paciente..." styleClass="search-field"/>
            <HBox HBox.hgrow="ALWAYS"/>
        </HBox>

        <!-- Tabela de Consultas Pendentes -->
        <VBox fx:id="vboxPendentes" spacing="8">
            <Label text="Consultas Pendentes de Faturamento" styleClass="section-title"/>
            <TableView fx:id="tabelaConsultas" VBox.vgrow="ALWAYS" prefHeight="300">
                <columns>
                    <TableColumn fx:id="colData" text="Data/Hora" prefWidth="150"/>
                    <TableColumn fx:id="colPaciente" text="Paciente" prefWidth="200"/>
                    <TableColumn fx:id="colVeterinario" text="Veterinário" prefWidth="200"/>
                    <TableColumn fx:id="colDiagnostico" text="Diagnóstico" prefWidth="300"/>
                    <TableColumn fx:id="colAcoes" text="Ações" prefWidth="150"/>
                </columns>
                <columnResizePolicy>
                    <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                </columnResizePolicy>
            </TableView>
        </VBox>

        <!-- Tabela de Pagamentos Realizados -->
        <VBox fx:id="vboxPagos" spacing="8" visible="false" managed="false">
            <Label text="Histórico de Pagamentos" styleClass="section-title"/>
            <TableView fx:id="tabelaPagamentos" VBox.vgrow="ALWAYS" prefHeight="300">
                <columns>
                    <TableColumn fx:id="colDataPagamento" text="Data Pagamento" prefWidth="150"/>
                    <TableColumn fx:id="colPacientePagamento" text="Paciente" prefWidth="200"/>
                    <TableColumn fx:id="colVeterinarioPagamento" text="Veterinário" prefWidth="200"/>
                    <TableColumn fx:id="colValorPagamento" text="Valor" prefWidth="120"/>
                    <TableColumn fx:id="colMetodoPagamento" text="Método" prefWidth="150"/>
                    <TableColumn fx:id="colFuncionarioPagamento" text="Funcionário" prefWidth="150"/>
                </columns>
                <columnResizePolicy>
                    <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                </columnResizePolicy>
            </TableView>
        </VBox>

        <!-- Estado Vazio -->
        <VBox fx:id="vboxEmptyState" alignment="CENTER" spacing="10" styleClass="empty-state" visible="false" managed="false">
            <Label text="Nenhuma consulta pendente de faturamento." styleClass="empty-state-label"/>
        </VBox>
    </VBox>
</VBox>
